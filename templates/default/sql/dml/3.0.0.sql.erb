DELETE FROM `hopsworks`.`variables` WHERE `id`='fs_job_util';
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("fs_py_job_util", "hdfs:///user/<%= node['hadoop_spark']['user'] %>/hsfs_utils.py");
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("fs_java_job_util", "hdfs:///user/<%= node['hadoop_spark']['user'] %>/hsfs-utils.jar");
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("kube_skip_namespace_creation", "<%= node['hopsworks']['kubernetes']['skip_namespace_creation']%>");

DELETE FROM `hopsworks`.`host_services` WHERE `name`='elasticsearch';
DELETE FROM `hopsworks`.`host_services` WHERE `name`='kibana';

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("kube_knative_domain_name", "<%= node['kube-hops']['knative']['domain_name'] %>", 1);

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES ("kube_kserve_installed", "<%= node['kube-hops']['kserve']['enabled'] %>", 1);
DELETE FROM `hopsworks`.`variables` WHERE `id`='kube_kfserving_installed';

REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("quotas_featuregroups_online_disabled", <%= node['hopsworks']['quotas']['online_disabled_featuregroups'] %>);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("quotas_featuregroups_online_enabled", <%= node['hopsworks']['quotas']['online_enabled_featuregroups'] %>);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("quotas_training_datasets", <%= node['hopsworks']['quotas']['training_datasets'] %>);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("quotas_model_deployments_total", <%= node['hopsworks']['quotas']['total_model_deployments'] %>);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("quotas_model_deployments_running", <%= node['hopsworks']['quotas']['running_model_deployments'] %>);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES ("quotas_max_parallel_executions", <%= node['hopsworks']['quotas']['max_parallel_executions'] %>);

-- HOPSWORKS-3158
REPLACE INTO `hopsworks`.`variables` (`ID`, `VALUE`) VALUES ('hopsworks_public_host', "<%= node['hopsworks']['hopsworks_public_host'] %>");
-- HOPSWORKS-3109
DELETE FROM `hopsworks`.`variables` WHERE `id`='aws_instance_role';

REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_of_type', '{"column": "feature", "mostly": 1, "type_": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_distinct_values_to_be_in_set', '{"column": "feature", "value_set": [], "parse_strings_as_datetimes": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_distinct_values_to_contain_set', '{"column": "feature", "value_set": [], "parse_strings_as_datetimes": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_distinct_values_to_equal_set', '{"column": "feature", "value_set": [], "parse_strings_as_datetimes": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_kl_divergence_to_be_less_than', '{"column": "feature", "threshold": null, "tail_weight_holdout": 0, "internal_weight_holdout": 0, "bucketize_data": true, "partition_object": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_max_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false, "parse_strings_as_datetimes": null, "output_strftime_format": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_mean_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_median_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_min_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false, "parse_strings_as_datetimes": null, "output_strftime_format": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_most_common_value_to_be_in_set', '{"column": "feature", "value_set": [], "ties_okay": true}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_pair_values_to_be_equal', '{"column_A": "feature_A", "column_B": "feature_B"}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_pair_values_to_be_in_set', '{"column_A": "feature_A", "column_B": "feature_B", "mostly": 1, "value_pairs_set": []}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_proportion_of_unique_values_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_quantile_values_to_be_between', '{"column": "feature", "allow_relative_error": false, "quantile_ranges": {"quantiles": [], "values": []}}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_stdev_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_sum_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_to_exist', '{"column": "feature", "column_index": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_unique_value_count_to_be_between', '{"column": "feature", "min_value": null, "max_value": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_value_lengths_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "mostly": 1}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_value_lengths_to_equal', '{"column": "feature", "mostly": 1, "value": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_value_z_scores_to_be_less_than', '{"column": "feature", "mostly": 1, "threshold": null, "double_sided": false}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_between', '{"column": "feature", "min_value": null, "max_value": null, "strict_min": false, "strict_max": false, "mostly": 1, "parse_strings_as_datetimes": null, "allow_cross_type_comparisons": false, "output_strftime_format": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_dateutil_parseable', '{"column": "feature", "mostly": 1}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_decreasing', '{"column": "feature", "mostly": 1, "strictly": false, "parse_strings_as_datetimes": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_in_set', '{"column": "feature", "mostly": 1, "value_set": [], "parse_strings_as_datetimes": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_in_type_list', '{"column": "feature", "mostly": 1, "type_list": []}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_increasing', '{"column": "feature", "mostly": 1, "strictly": false, "parse_strings_as_datetimes": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_json_parseable', '{"column": "feature", "mostly": 1}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_null', '{"column": "feature", "mostly": 1}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_be_unique', '{"column": "feature", "mostly": 1}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_match_json_schema', '{"column": "feature", "mostly": 1, "json_schema": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_match_regex', '{"column": "feature", "mostly": 1, "regex": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_match_regex_list', '{"column": "feature", "mostly": 1, "regex_list": [], "match_on": "any"}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_match_strftime_format', '{"column": "feature", "mostly": 1, "strftime_format": "%Y-%m-%d %H:%M:%S"}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_not_be_in_set', '{"column": "feature", "mostly": 1, "value_set": [], "parse_strings_as_datetimes": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_not_be_null', '{"column": "feature", "mostly": 1}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_not_match_regex', '{"column": "feature", "mostly": 1, "regex": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_column_values_to_not_match_regex_list', '{"column": "feature", "mostly": 1, "regex_list": []}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_compound_columns_to_be_unique', '{"column_list": ["feature_A"]}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_multicolumn_sum_to_equal', '{"column_list": ["feature_A"], "sum_total": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_table_column_count_to_be_between', '{"min_value": null, "max_value": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_table_column_count_to_equal', '{"value": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_table_columns_to_match_ordered_list', '{"column_list": ["feature_A"]}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_table_columns_to_match_set', '{"column_set": ["feature_A"], "exact_match": true}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_table_row_count_to_be_between', '{"min_value": null, "max_value": null}');
REPLACE INTO `hopsworks`.`great_expectation` (expectation_type, kwargs_template) VALUES ('expect_table_row_count_to_equal', '{"value": null}');

REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('kube_tainted_nodes', "<%= node['kube-hops']['taints'] %>");
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('kube_node_taints_monitor_interval', "<%= node['hopsworks']['kube']['kube_taints_monitor_interval'] %>");

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES('docker_cgroup_enabled', "<%= node['hops']['docker']['cgroup']['enabled'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('docker_cgroup_memory_limit_gb', "<%= node['hops']['docker']['cgroup']['memory']['hard-limit'] %>");
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('docker_cgroup_soft_limit_memory_gb', "<%= node['hops']['docker']['cgroup']['memory']['soft-limit']  %>");
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('docker_cgroup_cpu_quota_percentage', "<%= node['hops']['docker']['cgroup']['cpu']['quota']['percentage'] %>");
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('docker_cgroup_cpu_period', "<%= node['hops']['docker']['cgroup']['cpu']['period'] %>");
REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('docker_cgroup_monitor_interval', "<%= node['hopsworks']['docker']['cgroup_monitor_interval'] %>");

REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('prometheus_port', "<%= node['prometheus']['port']  %>");

REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('kube_kserve_tensorflow_version', "<%= node['kube-hops']['kserve']['tensorflow']['version'] %>");

DELETE FROM `hopsworks`.`variables` WHERE `id`='kube_docker_cores_fraction';

REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES('kube_serving_max_memory_allocation', "<%= node['kube-hops']['serving_max_memory_allocation'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES('kube_serving_max_cores_allocation', "<%= node['kube-hops']['serving_max_cores_allocation'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES('kube_serving_max_gpus_allocation', "<%= node['kube-hops']['serving_max_gpus_allocation'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES('kube_serving_max_num_instances', "<%= node['kube-hops']['serving_max_num_instances'] %>", 1);
REPLACE INTO `hopsworks`.`variables`(`id`, `value`, `visibility`) VALUES('kube_serving_min_num_instances', "<%= node['kube-hops']['serving_min_num_instances'] %>", 1);

REPLACE INTO `hopsworks`.`variables`(`id`, `value`) VALUES('ldap_group_mapping_sync_enabled', "<%= node['ldap']['group_mapping_sync_enabled'] %>");